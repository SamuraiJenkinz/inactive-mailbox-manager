---
phase: 07-polish-docs
plan: 02
type: execute
---

<objective>
Improve error handling throughout the application and create an onboarding wizard.

Purpose: Enhance user experience with better error messages and guided setup.
Output: Centralized error handling, user-friendly messages, first-run onboarding wizard.
</objective>

<context>
@.planning/PROJECT.md
@.planning/phases/07-polish-docs/07-01-SUMMARY.md

**Error handling requirements:**
1. Centralized exception handling with categorization
2. User-friendly error messages (not raw exceptions)
3. Logging integration for debugging
4. Recovery suggestions for common errors

**Onboarding requirements:**
1. First-run detection
2. Configuration wizard for Azure AD setup
3. Connection test with helpful feedback
4. Quick start guidance
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create centralized error handling</name>
  <files>src/utils/exceptions.py</files>
  <action>
    Create custom exception hierarchy:
    - Base AppException with error codes
    - ConnectionError, AuthenticationError
    - RecoveryError, RestoreError
    - ValidationError, ConfigurationError
    - User-friendly message templates
  </action>
  <done>Exception hierarchy created</done>
</task>

<task type="auto">
  <name>Task 2: Create error handler service</name>
  <files>src/utils/error_handler.py</files>
  <action>
    Create error handler:
    - Catch and categorize exceptions
    - Log with appropriate level
    - Return user-friendly messages
    - Suggest recovery actions
  </action>
  <done>Error handler working</done>
</task>

<task type="auto">
  <name>Task 3: Create onboarding wizard</name>
  <files>src/core/onboarding.py</files>
  <action>
    Create onboarding wizard:
    - First-run detection via config
    - Step-by-step Azure AD configuration
    - Connection testing with feedback
    - Configuration file generation
  </action>
  <done>Onboarding wizard complete</done>
</task>

</tasks>

<verification>
- [ ] Custom exceptions provide clear error codes
- [ ] Error messages are user-friendly
- [ ] Onboarding detects first run
- [ ] Configuration wizard guides setup
</verification>

<output>
After completion, create `.planning/phases/07-polish-docs/07-02-SUMMARY.md`
</output>
