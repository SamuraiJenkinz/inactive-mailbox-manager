---
phase: 05-terminal-ui
plan: 02
type: execute
---

<objective>
Implement detail views for mailbox information, holds, and cost dashboard.

Purpose: Provide detailed information screens for selected mailboxes and overview dashboards.
Output: Working detail screens with holds view, cost dashboard, and mailbox details.
</objective>

<context>
@.planning/phases/05-terminal-ui/05-01-SUMMARY.md
@src/core/hold_analyzer.py
@src/core/dashboard_service.py
@src/core/cost_calculator.py

**Detail view requirements:**
1. Mailbox Detail: Full mailbox properties
2. Holds View: Hold analysis with recommendations
3. Cost Dashboard: Metrics and charts (text-based)
4. Statistics View: Aggregated statistics

**Textual components for details:**
- Static: For labels and values
- Label: For headings
- Markdown: For formatted text
- Placeholder: For charts (ASCII/text)
- TabbedContent: For organizing sections
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create mailbox detail screen</name>
  <files>src/ui/screens/detail_screen.py</files>
  <action>
    Create mailbox detail view:

    1. Create MailboxDetailScreen class:
       - Accept mailbox as parameter
       - Display all mailbox properties

    2. Layout sections:
       - Header: Display name, identity
       - Properties: Two-column key-value
       - Holds: List of active holds
       - Actions: Available operations

    3. Property display:
       - Primary SMTP Address
       - Exchange GUID
       - Size / Item Count
       - Disconnected Date
       - Litigation Hold status
       - Archive status

    4. Action buttons:
       - Recover Mailbox
       - Restore to Existing
       - Export Details
       - Back to List

    5. Key bindings:
       - Escape: Back to list
       - r: Start recovery
       - s: Start restore
       - e: Export
  </action>
  <verify>python -c "from src.ui.screens.detail_screen import MailboxDetailScreen; print('MailboxDetailScreen imported')"</verify>
  <done>Mailbox detail screen showing properties</done>
</task>

<task type="auto">
  <name>Task 2: Create holds analysis view</name>
  <files>src/ui/screens/holds_screen.py</files>
  <action>
    Create holds analysis screen:

    1. Create HoldsScreen class:
       - Show hold summary for selected mailbox
       - Or show all holds across mailboxes

    2. Hold information display:
       - Hold type with icon/color
       - Hold source (GUID decoded)
       - Applied date if available
       - Impact on operations

    3. Summary section:
       - Total holds by type
       - Mailboxes affected
       - Recovery blockers

    4. Recommendations:
       - Display hold-specific guidance
       - Link to documentation

    5. Visual indicators:
       - Color-coded hold types
       - Warning icons for blockers
  </action>
  <verify>python -c "from src.ui.screens.holds_screen import HoldsScreen; print('HoldsScreen imported')"</verify>
  <done>Holds analysis screen with recommendations</done>
</task>

<task type="auto">
  <name>Task 3: Create cost dashboard screen</name>
  <files>src/ui/screens/dashboard_screen.py</files>
  <action>
    Create cost dashboard view:

    1. Create DashboardScreen class:
       - Display executive metrics
       - Show cost breakdowns
       - List recommendations

    2. Metrics section (cards):
       - Total mailboxes
       - Monthly cost
       - Annual cost
       - Potential savings

    3. Cost breakdown (text tables):
       - By license type
       - By hold type
       - By age bracket
       - By department

    4. Top lists:
       - Top 10 by cost
       - Top 10 oldest
       - Top 10 largest

    5. Recommendations section:
       - Display cost optimization tips
       - Highlight quick wins

    6. ASCII chart placeholder:
       - Simple bar chart using text
       - Show distribution visually
  </action>
  <verify>python -c "from src.ui.screens.dashboard_screen import DashboardScreen; print('DashboardScreen imported')"</verify>
  <done>Cost dashboard with metrics and breakdowns</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Mailbox detail screen shows all properties
- [ ] Holds screen displays hold analysis
- [ ] Dashboard shows cost metrics
- [ ] Navigation between screens works
- [ ] Action buttons trigger operations
- [ ] Theme consistent across all screens
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Screens display correct data
- Navigation is intuitive
- Actions are accessible
</success_criteria>

<output>
After completion, create `.planning/phases/05-terminal-ui/05-02-SUMMARY.md`
</output>
